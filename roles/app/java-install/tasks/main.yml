# - name: Descargar archivo de instalación JRE
#   get_url:
#     url: https://download.oracle.com/otn-pub/java/jdk/8u201-b09/42970487e3af4f5aa5bca3f542482c60/jre-8u201-linux-x64.tar.gz
#     dest: /usr/java
#     mode: a+x
#     ignore_errors: yes
- name: Descargar archivo de instalación JDK
  get_url:
    url: http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u201-linux-x64.rpm
    dest: /tmp
    mode: a+x
    headers:
      Cookie: oraclelicense=accept-securebackup-cookie
    validate_certs: no
- command: "yum -y localinstall jdk-8u131-linux-x64.rpm"
- name: Crea y exportar Variable JAVA
  shell: export JAVA_HOME=/usr/java/jdk-java
- name: Crea y exporta Variable PATH
  shell: export PATH=$JAVA_HOME/bin:$PATH
- name: Respaldo Archivo Profile
  command: cp /etc/profile /etc/profile-b-java.bkp
- name: Agrega JAVA_HOME y PATH al archivo Profile
  shell: sed -i '$a JAVA_HOME=/usr/java/jdk-java' /etc/profile; sed -i '$a export JAVA_HOME' /etc/profile; sed -i '$a PATH=$JAVA_HOME/bin:$PATH' /etc/profile; sed -i '$a export PATH' /etc/profile
- name: Source Archivo Profile
  shell: source /etc/profile
- name: Agrega JAVA_HOME al anchivo Environment
  lineinfile:
    path: /etc/environment
    line: "JAVA_HOME=/usr/java/jdk-java"
    create: yes
